datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

enum TransactionType {
  RECEIVED
  SENT
}

enum TransactionStatus {
  PENDING
  FAILED
  COMPLETED
  REFUNDED
  RELAYED
}

model Transaction {
  id                Int              @id @default(autoincrement())
  status            TransactionStatus
  date              DateTime
  amount            Int
  txHash            String            
  contractId        String            @unique
  hashLockTimestamp Int
  lnInvoice         String
  userAddress       String
  transactionType   TransactionType
}

model CachedPayment {
  id         Int    @id @default(autoincrement())
  contractId String @unique
  secret     String
  requiredBalance BigInt
  createdAt  DateTime @default(now())
}
